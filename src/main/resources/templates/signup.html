<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link rel="stylesheet" href="/styles/sign_form.css">
</head>

<body>
	<form id="signup_form" name="user" th:action="@{/signup}" method="post" onsubmit="return check()">
		<div class="container">
			<div id="msg"></div>
			<h2>Please sign up</h2>
			<div>Username
				<input type="text" name="username" placeholder="Letters, digits, _" pattern="[a-zA-Z0-9_]+"
					required="required">
			</div>
			<div>Password
				<input type="password" name="password" id="password" pattern="[a-zA-Z0-9]{8,}"
					placeholder="At least 8 letters or digits" required="required">
			</div>
			<div>Confirm password
				<input type="password" id="confirm-password" pattern="[a-zA-Z0-9]{8,}"
					placeholder="At least 8 letters or digits" required="required" onkeyup="check()">
			</div>
			<input type="checkbox" onclick="showPasswords()">Show Passwords
			<div>Name
				<input type="text" name="name" pattern="^[a-zA-Zа-яёА-ЯЁ]+$" placeholder="Letters" required="required">
			</div>
			<div>Email
			     <input type="email" name="email" placeholder="@Email" pattern="[a-z-0-9_]+@+[a-z-0-9_]+$+.com" required="required" onkeyup="check()">
			</div>
			<div class="line">
				<div>
					<label> Age <input type="number" name="age" min="1" max="150" required="required">
					</label>
				</div>
				<div>
					Male <input id="m" type="radio" name="gender" value="male" required>
					Female <input id="f" type="radio" name="gender" value="female" required>
				</div>
			</div>
			<button type="submit" value="Sign up">Sign Up</button>
			<a href="/login">Do you have an account? Sign in</a>
		</div>
	</form>
	<script type="text/javascript">
		function check() {
			var password = document.getElementById("password").value
			var confirm = document.getElementById("confirm-password").value
			var msg = document.getElementById("msg")

			if (password != confirm) {
				msg.innerText = "Password doesn't match!"
				msg.style = "color: red;"
				return false
			} else {
				msg.innerText = "Password matches!"
				msg.style = "color: green;"
			}
			return true
		}
		function showPasswords() {
			var password = document.getElementById("password")
			var confirm = document.getElementById("confirm-password")
			if (password.type === "password") {
				password.type = "text"
				confirm.type = "text"
			} else {
				password.type = "password"
				confirm.type = "password"
			}
		}
	</script>
</body>

</html>